<!doctype html>
<html>
  <head>
    <title>lib/language.js [ Indoc ]</title>
    <link rel="stylesheet" href="./../../public/style.css" />
    <script src="./../../public/jquery.min.js"></script>
    <script src="./../../public/script.js"></script>
  </head>
  <body class="code">
    
    <main id="sections">

      <!-- The header -->

      <section class="section header files-hidden" id="header">

        <aside class="comment">

          <header>

            <div class="file-path">
              
              <a id="project-overview" href="./../.." title="Project Overview">Indoc</a>
              
              <div class="files-menu">
                <span id="filename">lib/language.js</span>
                
                <ul class="files hidable">
                  
                  <li class="file"><a href="./../../README.md/">README.md</a></li>
                  <li class="file"><a href="./../../bin/main.js/">bin/main.js</a></li>
                  <li class="file"><a href="./../../examples/example.c/">examples/example.c</a></li>
                  <li class="file"><a href="./../../examples/example.js/">examples/example.js</a></li>
                  <li class="file"><a href="./../../examples/example.s/">examples/example.s</a></li>
                  <li class="file"><a href="./../../lib/class.js/">lib/class.js</a></li>
                  <li class="file"><a href="./../../lib/file.js/">lib/file.js</a></li>
                  <li class="file"><a href="./../../lib/main.js/">lib/main.js</a></li>
                  <li class="file"><a href="./../../lib/section.js/">lib/section.js</a></li>
                  
                </ul>
                
              </div>
                
            </div>

            <div class="spacer"></div>
            
          </header>
            
        </aside>

        <div class="code empty">
        </div>
        
      </section>

      <!-- The main code section -->
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"></div>
        </aside>

        <div class="code">
          <pre><code><span class="hljs-keyword">var</span> c = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./class'</span>).class;
<span class="hljs-keyword">var</span> merge = <span class="hljs-built_in">require</span>(<span class="hljs-string">'merge'</span>);

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Hardcoded list of languages. Sorry.</p>
</div>
        </aside>

        <div class="code">
          <pre><code></code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Also, multiline comments aren&#39;t supported yet.  No, really, they&#39;re
not.  Seriously. Totally not. This text here <em>totally</em> isn&#39;t from a
multiline comment.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>exports.languages = {
  
  <span class="hljs-string">'JavaScript'</span>: {
    name: {
      hljs: <span class="hljs-string">'JavaScript'</span>
    },
    single: [
      <span class="hljs-string">'//'</span>
    ],
    multi: [
      [<span class="hljs-string">'/*'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-string">'*/'</span>]
    ]
  },
  
  <span class="hljs-string">'Markdown'</span>: {
    name: {
      hljs: <span class="hljs-literal">null</span>
    },
    single: [
    ],
    multi: [
    ]
  },
  
  <span class="hljs-string">'SCSS'</span>: {
    name: {
      hljs: <span class="hljs-string">'SCSS'</span>
    },
    single: [
      <span class="hljs-string">'//'</span>
    ],
    multi: [
      [<span class="hljs-string">'/*'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-string">'*/'</span>]
    ]
  },
  
  <span class="hljs-string">'HTML'</span>: {
    name: {
      hljs: <span class="hljs-string">'HTML'</span>
    },
    single: [
    ],
    multi: [
      [<span class="hljs-string">'&lt;!--'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'--&gt;'</span>]
    ]
  },
  
  <span class="hljs-string">'GAS'</span>: {
    name: {
      hljs: <span class="hljs-string">'armasm'</span>
    },
    single: [
      <span class="hljs-string">';'</span>,
      <span class="hljs-string">'@'</span>
    ],
    multi: [
    ]
  },
  
  <span class="hljs-string">'C'</span>: {
    name: {
      hljs: <span class="hljs-string">'cpp'</span>
    },
    single: [
      <span class="hljs-string">'//'</span>
    ],
    multi: [
      [<span class="hljs-string">'/*'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-string">'*/'</span>]
    ]
  }
  
};

exports.language = c.extend({
  
  init: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">project, file, language</span>) </span>{
    <span class="hljs-keyword">this</span>.name = {};
    
    <span class="hljs-keyword">this</span>.single = [];
    
    <span class="hljs-keyword">this</span>.multi = [];

    <span class="hljs-keyword">var</span> languages = merge(exports.languages, project.options.languages);

    <span class="hljs-keyword">if</span>(language <span class="hljs-keyword">in</span> languages) {
      <span class="hljs-keyword">var</span> l = languages[language];
      
      <span class="hljs-keyword">this</span>.name = l.name;
      <span class="hljs-keyword">this</span>.single = l.single;
      <span class="hljs-keyword">this</span>.multi = l.multi;
      
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-string">'no such language "'</span> + language + <span class="hljs-string">'"'</span>;
    }
    
  },

  is_single_comment: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
    
</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Why add the space? Because we still want the empty comments to
separate paragraphs in Markdown. Adding a space to the end of
the comment is a bit of a weird way to do it, but it&#39;s fast and
works well.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    line = line.trim() + <span class="hljs-string">' '</span>;

    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.single.length; i++) {
      <span class="hljs-keyword">if</span>(line.startsWith(<span class="hljs-keyword">this</span>.single[i] + <span class="hljs-string">' '</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  is_multi_comment: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
    
    line = line.trim();
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.multi.length; i++) {
      <span class="hljs-keyword">if</span>(line.startsWith(<span class="hljs-keyword">this</span>.multi[i][<span class="hljs-number">0</span>] + <span class="hljs-string">' '</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  is_in_multi_comment: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
    
    line = line.trim();
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.multi.length; i++) {
      <span class="hljs-keyword">if</span>(line.startsWith(<span class="hljs-keyword">this</span>.multi[i][<span class="hljs-number">0</span>] + <span class="hljs-string">' '</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span>(line.startsWith(<span class="hljs-keyword">this</span>.multi[i][<span class="hljs-number">1</span>])) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span>(line.endsWith(<span class="hljs-keyword">this</span>.multi[i][<span class="hljs-number">2</span>])) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  strip_single_comment: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
    
</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Given a comment, returns the contents of it.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    line = line.trim();
    <span class="hljs-keyword">var</span> c;
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.single.length; i++) {
      c = <span class="hljs-keyword">this</span>.single[i];
      
      <span class="hljs-keyword">if</span>(line.startsWith(c)) {
        <span class="hljs-keyword">return</span> line.substr(c.length).trim();
      }
      
    }
    
    <span class="hljs-keyword">return</span> line;
  },

  strip_multi_comment_end: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line, end</span>) </span>{
    line = line.trim();

    <span class="hljs-keyword">if</span>(line.endsWith(end)) {
      <span class="hljs-keyword">return</span> line.substr(<span class="hljs-number">0</span>, line.length - end.length).trim();
    }
    <span class="hljs-keyword">return</span> line;
  },
      
  strip_multi_comment: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
    
    line = line.trim();
    <span class="hljs-keyword">var</span> s, m, e;
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.multi.length; i++) {
      s = <span class="hljs-keyword">this</span>.multi[i][<span class="hljs-number">0</span>] + <span class="hljs-string">' '</span>;
      m = <span class="hljs-keyword">this</span>.multi[i][<span class="hljs-number">1</span>];
      e = <span class="hljs-keyword">this</span>.multi[i][<span class="hljs-number">2</span>];

      <span class="hljs-keyword">if</span>(line.startsWith(s)) {
        line = line.substr(m.length);
        
        <span class="hljs-keyword">if</span>(line.startsWith(m))
          line = line.substr(m.length).trim();
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.strip_multi_comment_end(line, e);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(line.endsWith(e)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.strip_multi_comment_end(line, e);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(line.startsWith(m)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.strip_multi_comment_end(line.substr(m.length), e);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">continue</span>;
      }
        
    }
    
    <span class="hljs-keyword">return</span> line;
  },

  is_comment: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.is_single_comment(line) || <span class="hljs-keyword">this</span>.is_multi_comment(line);
  },

  strip_comment: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
    
</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>See <code>strip_single_comment</code>.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.is_single_comment(line))
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.strip_single_comment(line);
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.strip_multi_comment(line);
    <span class="hljs-keyword">return</span> line;
  }

});

</code></pre>
        </div>
        
      </section>
      
      <section class="section footer" id="footer">
        
        <aside class="comment">
          <span class="project-copyright">&copy; Copyright 2016 ZLSA Design.</span>
        </aside>

        <div class="code">
          <span class="page-generation-time">Generated Fri, 11 Mar 2016 21:13:46 GMT</span>
        </div>
        
      </section>
      
    </main>

  </body>
</html>

