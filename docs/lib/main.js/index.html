<!doctype html>
<html>
  <head>
    <title>lib/main.js [ Indoc ]</title>
    <link rel="stylesheet" href="./../../public/style.css" />
    <script src="./../../public/jquery.min.js"></script>
    <script src="./../../public/script.js"></script>
  </head>
  <body class="code">
    
    <main id="sections">

      <!-- The header -->

      <section class="section header files-hidden" id="header">

        <aside class="comment">

          <header>

            <div class="file-path">
              
              <a id="project-overview" href="./../.." title="Project Overview">Indoc</a>
              
              <div class="files-menu">
                <span id="filename">lib/main.js</span>
                
                <ul class="files hidable">
                  
                  <li class="file"><a href="./../../README.md/">README.md</a></li>
                  <li class="file"><a href="./../../bin/main.js/">bin/main.js</a></li>
                  <li class="file"><a href="./../../examples/example.c/">examples/example.c</a></li>
                  <li class="file"><a href="./../../examples/example.js/">examples/example.js</a></li>
                  <li class="file"><a href="./../../examples/example.s/">examples/example.s</a></li>
                  <li class="file"><a href="./../../lib/class.js/">lib/class.js</a></li>
                  <li class="file"><a href="./../../lib/file.js/">lib/file.js</a></li>
                  <li class="file"><a href="./../../lib/language.js/">lib/language.js</a></li>
                  <li class="file"><a href="./../../lib/section.js/">lib/section.js</a></li>
                  
                </ul>
                
              </div>
                
            </div>

            <div class="spacer"></div>
            
          </header>
            
        </aside>

        <div class="code empty">
        </div>
        
      </section>

      <!-- The main code section -->
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Wow. I require a lot of things here. Without them, I wouldn&#39;t be
happy.</p>
</div>
        </aside>

        <div class="code">
          <pre><code><span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs-extra'</span>);
<span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">var</span> merge = <span class="hljs-built_in">require</span>(<span class="hljs-string">'merge'</span>);
<span class="hljs-keyword">var</span> handlebars = <span class="hljs-built_in">require</span>(<span class="hljs-string">'handlebars'</span>);
<span class="hljs-keyword">var</span> parallel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'run-parallel'</span>);
<span class="hljs-keyword">var</span> auto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'run-auto'</span>);
<span class="hljs-keyword">var</span> glob_copy = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glob-copy'</span>);
<span class="hljs-keyword">var</span> glob = <span class="hljs-built_in">require</span>(<span class="hljs-string">"glob"</span>);

<span class="hljs-keyword">var</span> section = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./section'</span>);
<span class="hljs-keyword">var</span> file = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./file'</span>);

<span class="hljs-keyword">var</span> c = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./class'</span>).class;

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>The project thingy.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>exports.project = c.extend({
  
  init: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>A list of filenames.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">this</span>.filenames = [];

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>A list of files. (See <a href="&#39;../file.js&#39;"><code>file.js</code></a>)</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">this</span>.files = [];

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Merge the options argument with some sane defaults.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">this</span>.options = merge({
      name: <span class="hljs-literal">null</span>,
      files: [],
      owners: <span class="hljs-string">'contributors'</span>,
      output: <span class="hljs-string">'docs'</span>,
      readme: <span class="hljs-literal">null</span>,
      languages: {}
    }, options);

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Templates, along with a flag to avoid premature running.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">this</span>.templates = {};
    <span class="hljs-keyword">this</span>.templates_ready = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">this</span>.default_template_data = {
      project: <span class="hljs-keyword">this</span>.options.name,
      title: <span class="hljs-keyword">this</span>.options.name,
      path: <span class="hljs-string">''</span>,
      classes: <span class="hljs-string">''</span>,
      year: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getUTCFullYear(),
      owners: <span class="hljs-keyword">this</span>.options.owners,
      generate_time: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toUTCString()
    };

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Gentlemen, prepare your templates!</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">this</span>.prepare_templates();
  },
  
</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>This just reads a file and creates a Handlebars template from it.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  prepare_template: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filename, callback</span>) </span>{

    fs.readFile(filename, <span class="hljs-string">'utf-8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>)</span>{
      <span class="hljs-keyword">if</span>(err) {
        callback(err, data);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">var</span> template = handlebars.compile(data);

      callback(err, template);
      
    });
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>This prepares a list of templates, as well as emitting the proper
events when things happen.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  prepare_templates: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> i,
        templates = [
          [<span class="hljs-string">'page'</span>, <span class="hljs-string">'page.html'</span>] <span class="hljs-comment">// I know there's only one template here. Shut up.</span>
        ];

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>When <code>total == complete</code>, the templates are all loaded.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">var</span> complete = <span class="hljs-number">0</span>,
        total = templates.length;

    <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;templates.length; i++) {

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>New function for the loop.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>      (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, filename</span>) </span>{
        <span class="hljs-keyword">var</span> true_filename = path.join(__dirname, <span class="hljs-string">'template'</span>, filename);
        scope.prepare_template.call(scope, true_filename, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, template</span>) </span>{

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Yay, one more done!</p>
</div>
        </aside>

        <div class="code">
          <pre><code>          complete += <span class="hljs-number">1</span>;

          <span class="hljs-keyword">if</span>(err) {
            scope.emit.call(scope, <span class="hljs-string">'template-err'</span>, { filename: true_filename });
          } <span class="hljs-keyword">else</span> {
            scope.templates[name] = template;
            scope.emit.call(scope, <span class="hljs-string">'template-ready'</span>, { template: template });
          }
          
          <span class="hljs-keyword">if</span>(complete == total) {
            scope.templates_ready = <span class="hljs-literal">true</span>;
            scope.emit.call(scope, <span class="hljs-string">'templates-ready'</span>);
          }
          
        });
      })(templates[i][<span class="hljs-number">0</span>], templates[i][<span class="hljs-number">1</span>]);
      
    }
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Adds all the filenames to <code>this.filenames</code>, while removing duplicates.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  add_files: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">files</span>) </span>{
    
    <span class="hljs-keyword">var</span> i;
    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;files.length; i++) {
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.filenames.indexOf(files[i]) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.filenames.push(files[i]);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'duplicate-file'</span>, { filename: files[i] });
      }
    }

  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Replaces <code>this.filenames</code> with the un-globbed version.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  glob_files: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> filenames = [];

    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.filenames.length; i++) {
      filenames.push.apply(filenames, glob.sync(<span class="hljs-keyword">this</span>.filenames[i]));
    }

    <span class="hljs-keyword">this</span>.filenames = filenames;
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Do I really need to tell you!?</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  sort_files: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.filenames.sort();
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Copy <code>lib/public/filename</code> to <code>docs/public/filename</code>.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  copy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filename, callback</span>) </span>{
    <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>,
        src = path.join(__dirname, <span class="hljs-string">'public'</span>, filename),
        dest = path.join(scope.options.output, <span class="hljs-string">'public'</span>, filename);

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Because I&#39;m using <code>fs-extra</code>, I don&#39;t need to make the
directories first. Yay for laziness!</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    fs.copy(src, dest, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
      <span class="hljs-keyword">if</span>(err)
        scope.emit.call(scope, <span class="hljs-string">'copy-err'</span>, {
          filename: filename,
          src: src,
          dest: dest
        });
      callback(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
    });
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Like the above, but globby.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  glob_copy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filename, callback</span>) </span>{
    <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>,
        src = path.join(__dirname, <span class="hljs-string">'public'</span>, filename),
        dest = path.join(scope.options.output, <span class="hljs-string">'public'</span>);

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Make the directories, first. <code>glob_copy</code> does not like
laziness.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    fs.mkdirs(dest, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
      glob_copy(src, dest, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
        callback(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
      });
    });
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Ugh, bad naming. Copies a list of globbed filenames.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  copy_glob: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">files, callback</span>) </span>{
    <span class="hljs-keyword">var</span> total = files.length;
    <span class="hljs-keyword">var</span> complete = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;files.length; i++) {
      <span class="hljs-keyword">this</span>.glob_copy(files[i], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        complete += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span>(complete == total)
          callback.apply(callback, <span class="hljs-built_in">arguments</span>);
      });
    }
  },
  
  copy_css: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">this</span>.copy(<span class="hljs-string">'style.css'</span>, callback);
  },
  
  copy_images: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">this</span>.copy_glob([<span class="hljs-string">'*.png'</span>], callback);
  },
  
  copy_js: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">this</span>.copy_glob([<span class="hljs-string">'*.js'</span>], callback);
  },
  
  copy_fonts: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">this</span>.copy_glob([<span class="hljs-string">'*.eot'</span>, <span class="hljs-string">'*.woff'</span>], callback);
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Calls the above four functions in parallel, then calls the
callback when they&#39;re all done.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  copy_public: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
    
    parallel([
      
      <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        scope.copy_js.call(scope, next);
      },

      <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        scope.copy_css.call(scope, next);
      },
      
      <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        scope.copy_fonts.call(scope, next);
      },
      
      <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        scope.copy_images.call(scope, next);
      }
    ], callback);
    
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>For each file, run it.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  run_files: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{

    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.readme) {
      <span class="hljs-keyword">this</span>.add_files([<span class="hljs-keyword">this</span>.options.readme]);
    }
    
    <span class="hljs-keyword">this</span>.add_files(<span class="hljs-keyword">this</span>.options.files);

    <span class="hljs-keyword">this</span>.glob_files();
    
    <span class="hljs-keyword">this</span>.sort_files();
      
    <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>,
        total = <span class="hljs-keyword">this</span>.filenames.length + <span class="hljs-number">1</span>,
        complete = <span class="hljs-number">1</span>,
        errors = <span class="hljs-number">0</span>;
    
</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>RIP.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.filenames.length == <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'! no files to parse'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">var</span> i, f;

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Inline functions to reduce complexity in the loop.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run_complete</span>(<span class="hljs-params"></span>) </span>{

      <span class="hljs-keyword">var</span> data = {
        total: total,
        complete: complete,
        errors: errors
      };
      
      scope.emit.call(scope, <span class="hljs-string">'run-complete'</span>, data);

        <span class="hljs-keyword">if</span>(callback) {
          callback(<span class="hljs-literal">null</span>, data);
        }
    }

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Called when a single file is complete.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">file_complete</span>(<span class="hljs-params">err, data</span>) </span>{

      <span class="hljs-keyword">if</span>(err) errors += <span class="hljs-number">1</span>;
      
      scope.emit.call(scope, <span class="hljs-string">'run-file-complete'</span>, { err: err, data: data });

      complete += <span class="hljs-number">1</span>;

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>WE ARE DONE! YAY! WOOHOO!</p>
</div>
        </aside>

        <div class="code">
          <pre><code>      <span class="hljs-keyword">if</span>(total == complete) run_complete();
      
    };

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>The loop is nice and tiny, just like a loop should be.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.filenames.length; i++) {
      f = file.file.create(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.filenames[i]);
      f.run(file_complete);
      <span class="hljs-keyword">this</span>.files.push(f);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Returns a list of all the filenames and link URLs (used to create
the file listing in the sidebar.)</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  get_link_filenames: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ignore</span>) </span>{

    <span class="hljs-keyword">var</span> i, filenames=[];
    
    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.files.length; i++) {
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.files[i] === ignore) <span class="hljs-keyword">continue</span>;
      filenames.push({
        filename: <span class="hljs-keyword">this</span>.files[i].filename,
        link: <span class="hljs-keyword">this</span>.files[i].get_link()
      });
    }

    <span class="hljs-keyword">return</span> filenames;
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Generates the home page.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  generate_overview: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    
    <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>, i;

    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">this</span>.files.length; i++) {
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.files[i].filename == <span class="hljs-keyword">this</span>.options.readme) {
        
        (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>) </span>{
          <span class="hljs-keyword">var</span> filepath = path.join(scope.options.output, <span class="hljs-string">'index.html'</span>);
          f.generate_output(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
            f.write(data, filepath, callback);
          });
        })(<span class="hljs-keyword">this</span>.files[i]);
        
        <span class="hljs-keyword">break</span>;
      }
    }
    
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Copies the files and generates the overview, thanks to <code>run-auto</code>.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  _run: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
    
    auto({
      
      files: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        scope.run_files.call(scope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
          next(err, data);
        });
      },
      
      copy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        scope.copy_public.call(scope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
          next(err, data);
        });
      },
      
      overview: [<span class="hljs-string">'files'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        scope.generate_overview.call(scope, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
          next(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
        });
      }]
      
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
      callback(err, results.files);
    });
             
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>A wrapper, to avoid running before the templates are completely
loaded.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  run: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.templates_ready) {
      
      <span class="hljs-keyword">this</span>._run(callback);
      
    } <span class="hljs-keyword">else</span> {
      
      <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
      
      <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'templates-ready'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        scope._run.call(scope, callback);
      });
      
    }
    
  }
  
});

</code></pre>
        </div>
        
      </section>
      
      <section class="section footer" id="footer">
        
        <aside class="comment">
          <span class="project-copyright">&copy; Copyright 2016 ZLSA Design.</span>
        </aside>

        <div class="code">
          <span class="page-generation-time">Generated Fri, 11 Mar 2016 21:13:46 GMT</span>
        </div>
        
      </section>
      
    </main>

  </body>
</html>

