<!doctype html>
<html>
  <head>
    <title>lib/section.js [ Indoc ]</title>
    <link rel="stylesheet" href="./../../public/style.css" />
    <script src="./../../public/jquery.min.js"></script>
    <script src="./../../public/script.js"></script>
  </head>
  <body class="code">
    
    <main id="sections">

      <!-- The header -->

      <section class="section header files-hidden" id="header">

        <aside class="comment">

          <header>

            <div class="file-path">
              
              <a id="project-overview" href="./../.." title="Project Overview">Indoc</a>
              
              <div class="files-menu">
                <span id="filename">lib/section.js</span>
                
                <ul class="files hidable">
                  
                  <li class="file"><a href="./../../README.md/">README.md</a></li>
                  <li class="file"><a href="./../../bin/main.js/">bin/main.js</a></li>
                  <li class="file"><a href="./../../examples/example.c/">examples/example.c</a></li>
                  <li class="file"><a href="./../../examples/example.js/">examples/example.js</a></li>
                  <li class="file"><a href="./../../examples/example.s/">examples/example.s</a></li>
                  <li class="file"><a href="./../../lib/class.js/">lib/class.js</a></li>
                  <li class="file"><a href="./../../lib/file.js/">lib/file.js</a></li>
                  <li class="file"><a href="./../../lib/language.js/">lib/language.js</a></li>
                  <li class="file"><a href="./../../lib/main.js/">lib/main.js</a></li>
                  
                </ul>
                
              </div>
                
            </div>

            <div class="spacer"></div>
            
          </header>
            
        </aside>

        <div class="code empty">
        </div>
        
      </section>

      <!-- The main code section -->
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Highlightjs, marked.</p>
</div>
        </aside>

        <div class="code">
          <pre><code><span class="hljs-keyword">var</span> hljs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'highlight.js'</span>);
<span class="hljs-keyword">var</span> marked = <span class="hljs-built_in">require</span>(<span class="hljs-string">'marked'</span>);
<span class="hljs-keyword">var</span> c = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./class'</span>).class;

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Global options setting. I&#39;m guaranteed one context anway ATM, and
creating a new <code>function</code> for each invocation sounds silly and
inefficient.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>marked.setOptions({
  highlight: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">code, lang</span>) </span>{
    <span class="hljs-keyword">if</span>(!lang)
      <span class="hljs-keyword">return</span> hljs.highlightAuto(code).value;
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> hljs.highlight(lang, code).value;
  }
});

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Helper function to avoid duplicating the above in <a href="../main.js">main.js</a></p>
</div>
        </aside>

        <div class="code">
          <pre><code>exports.markdown = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
  <span class="hljs-keyword">return</span> marked(text);
};

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>A section contains a comment and code.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>exports.section = c.extend({
  
  init: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">project, file, language</span>) </span>{
    <span class="hljs-keyword">this</span>.project = project;
    
    <span class="hljs-keyword">this</span>.file = file;

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>The language is set from the file&#39;s language.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>    <span class="hljs-keyword">this</span>.language = language;

    <span class="hljs-keyword">this</span>.comment = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.comment_markdown = <span class="hljs-string">''</span>;
    
    <span class="hljs-keyword">this</span>.code = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.code_highlighted = <span class="hljs-string">''</span>;

    <span class="hljs-keyword">this</span>.code_is_markdown = <span class="hljs-literal">false</span>;
  },

  highlight_code: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.language.name.hljs) {
      <span class="hljs-keyword">this</span>.code_is_markdown = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">this</span>.code_highlighted = marked(<span class="hljs-keyword">this</span>.code);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.code_highlighted = hljs.highlight(<span class="hljs-keyword">this</span>.language.name.hljs, <span class="hljs-keyword">this</span>.code).value;
    }
  },

  parse_markdown: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.comment_markdown = marked(<span class="hljs-keyword">this</span>.comment);
  },

  done: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.code = <span class="hljs-keyword">this</span>.code;
    <span class="hljs-keyword">this</span>.comment = <span class="hljs-keyword">this</span>.comment.trim();
    
    <span class="hljs-keyword">this</span>.highlight_code();
    <span class="hljs-keyword">this</span>.parse_markdown();
  },

</code></pre>
        </div>
        
      </section>
      <section class="section">
        
        <aside class="comment">
          <div class="text markdown"><p>Returns true if both the comment and the code contain no more than whitespace.</p>
</div>
        </aside>

        <div class="code">
          <pre><code>  is_empty: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.comment.trim() &amp;&amp; !<span class="hljs-keyword">this</span>.code.trim()) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
});

</code></pre>
        </div>
        
      </section>
      
      <section class="section footer" id="footer">
        
        <aside class="comment">
          <span class="project-copyright">&copy; Copyright 2016 ZLSA Design.</span>
        </aside>

        <div class="code">
          <span class="page-generation-time">Generated Fri, 11 Mar 2016 21:13:46 GMT</span>
        </div>
        
      </section>
      
    </main>

  </body>
</html>

