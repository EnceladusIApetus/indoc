
@import 'values';
@import 'fonts';
@import 'markdown';
@import 'code';

@mixin comment() {
  
  > .comment {
    
    background: $comment-bg;
    
    line-height: 160%;

  }

}

@mixin code() {
  
  > .code {
    
    > pre {
      white-space: pre-wrap;
      word-wrap: break-word;

      font-size: $code-font-size;

      @include font-mono();
      @include hljs();
      
      line-height: 135%;
    }
    
  }
  
  &.markdown > .code > .markdown {
    @include markdown();

    @include font-mono();

    line-height: 150%;
  }
  
}

/* Set up padding mixins so we can extend them later */

@mixin comment-padding($vert, $left, $right) {

  > .comment {
    
    padding: $vert $right $vert $left;
    
  }
  
  &.footer > .comment {
    padding-top: $footer-padding;
    padding-bottom: $footer-padding;
  }
  
}

@mixin comment-padding-bottom($padding) {

  > .comment {
    padding-bottom: $padding;
  }
  
}

@mixin code-padding($vert, $left, $right) {
  
  > .code > pre,
  &.footer > .code {
    
    padding: $vert $right $vert $left;
    
  }

  &.footer > .code {
    padding-top: $footer-padding;
    padding-bottom: $footer-padding;
  }
  
  &.markdown > .code > .markdown {
    @include markdown-padding($left, $right);
  }
  
}

@mixin code-padding-bottom($padding) {

  > .code {
    padding-bottom: $padding;
  }
  
}

/* `section.section` styling now */

@mixin section() {
  
  @include comment();
  @include code();
  
}

/* TWO COLUMN STYLING */

@mixin comment-two-column($comment-width) {
  
  > .comment {
    
    width: $comment-width;
    min-width: 24em;
    max-width: 64em;
    
  }

  @include comment-padding($section-two-column-padding, $section-two-column-outer, $section-two-column-inner);
  
  &.footer > .comment {
    border-top: 1px solid $comment-border-color;
  }
  
}

@mixin code-two-column() {
  
  > .code {
    
    border-left: 1px solid $code-border-color;

    flex: 1;

  }

  @include code-padding($section-two-column-padding, $section-two-column-inner, $section-two-column-outer);
  
  &.footer > .code {
    border-top: 1px solid $code-border-color;
  }
  
}

@mixin section-two-column($comment-width) {
  display: flex;

  @include comment-two-column($comment-width);
  @include code-two-column();
  
}

@mixin section-last() {
  flex: 1;

  $padding: 64px;

  @include comment-padding-bottom($padding);
  @include code-padding-bottom($padding);
}

/* `#section` styling */

@mixin sections() {
  
  display: flex;
  flex-direction: column;

  .section {
    @include section();
    @include section-two-column($comment-width);

    &:nth-last-child(2) {
      @include section-last();
    }
    
  }
  
}
